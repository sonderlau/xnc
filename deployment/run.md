## Screen

所有程序都用 Screen 挂在后台

screen -ls 

screen -r ID

## 网页API

uvicorn API:app --port 8521 --host 192.168.1.33

## 演示页面

streamlit run main.py --server.port 8523



## 识别模块


### 杂物堆识别


`baseline` 放置每个机位的标准对比图 和 每个机位的道路边界

```
LOCATION NAME


003DMSH 海华村海百大桥东枪
006DMSH 海华村委门口枪
008DMSH 海华村西南角南 1枪
150DMSH 海华村沼溪厂旧址1
246DMSH 海华村石田塍机坝边枪
247DMSH 海华村新坝桥枪
248DMSH 海华村新桥头37门口枪
```

代码文件：
```
debris_detection_utils.py  识别工具类
debris_detection.py        提供的接口
```


#### 返回

杂物堆识别的部分部署上线了

在请求中 新增 location 参数

若不传则不进行杂物堆识别 只进行常规的物体识别

location : 字符串类型，不同机位的代码，如 246DMSH

这部分目前因为要像素比对，耗时会比较长，时间问题后续会继续优化

测试样例：http://116.233.79.75:8521/detect?path=https://i.328888.xyz/2023/01/10/0q4qk.jpeg&location=246DMSH




返回数据的 data 中，新增识别物体的类型名称： debris_pile
box 仍为归一化后的值

由于使用比对算法，confidence 值没有意义，若识别出有则返回

{
      "name": "debris_pile",
      "box": [],
      "confidence": 1.0
}

目前若识别到 行人 / 车辆，将不会进行杂物堆识别。

可能会出现漏判的情况，基本上是识别到的杂物堆 大小\面积 不在预期范围内，算法则会过滤掉识别结果。

若遗漏识别数量过多，麻烦您将图片做一个汇总发给我，我根据实际的杂物堆大小再修正设置的范围




以下是已经放入标准对比图片 并 已经划分道路区域 的机位：

003DMSH 海华村海百大桥东枪
006DMSH 海华村委门口枪
008DMSH 海华村西南角南1广枪
150DMSH 海华村沼溪厂旧址1广枪
246DMSH 海华村石田塍机坝边枪
247DMSH 海华村新坝桥广枪

其中 248DMSH 海华村新桥头37门口枪，树枝遮挡了大部分的道路，识别杂物堆的准确率会比较低



在服务器部署的 baseline 文件夹下存有标准对比图 和 道路边界的坐标

后续会提供一个接口用于 新增机位标准图 和 手动划分坐标的写入

需要前端完成的：
1. 指定一个作为标准对比图的图像
2. 返回道路边界的多边形坐标（点的顺序为顺时针 或 逆时针）

其中坐标以左上角为 (0, 0)，横向为x，纵向为y。



之后的任务顺序为
提高识别的准确度 -> 优化处理的时间 -> 提供接口